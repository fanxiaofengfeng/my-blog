# JVM
## 一、JVM模型图
![jvm内存模型](img.png)
JVM内存模型包括：
线程私有：
程序计数器、虚拟机栈（线程）

所有线程共享：
本地方法栈、Java堆、方法区（元空间）

1. 程序计数器：
   - 线程私有
   - 用于存储当前线程执行的字节码指令的地址
   - 在多线程环境下，不同线程的程序计数器互不影响
2. Java虚拟机栈：
   - 线程私有
   - 每个线程创建的时候都有一个私有的栈
   - 包含多个栈帧，每个方法调用都会创建一个栈帧
   - 栈帧随着方法的调用和返回而入栈和出栈
3. 本地方法栈
   - 用于支持native方法的执行。
   - native方法是使用非Java语言编写的，通过JNI与Java程序进行交互。
4. Java堆（Java Heap）
   - 用于存储对象实例和数组（数组本质也是对象）。
   - 所有线程共享的内存区域，是垃圾回收的主要区域。
   - 可分为新生代，老年代，永久代（或称为方法区）。
5. 方法区
   - 存储类的结构信息、常量、静态变量等数据。
   - 在JVM规范中，将方法区划分为非堆区域。
   - JDK8及之后版本，用元空间取代了永久代。
6. 运行时常量池
   - 保存编译期生成的各种字面量和符号引用。
   - 方法区的一部分。
## 二、垃圾收集算法
1. 标记-清楚算法
   - 标记阶段：从根节点出发，标记所有可达的对象。
   - 清除阶段：清除所有未被标记的对象，释放其占用的内存空间。
   - 缺点：可能会导致内存碎片化，清理阶段会导致停顿
2. 复制算法
   - 将内存分为两个区域，每次只使用其中一个区域。
   - 当一个区域满时，将存活的对象复制到另一个区域。
   - 



